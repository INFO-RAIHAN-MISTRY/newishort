{% extends 'Dashboard/base.html' %}

{% block title %}
	Dashboard
{% endblock title %}

{% block content %}
	
			<main class="content">
				<div class="container-fluid p-0">
					
					{% if messages %}
						
						{% for message in messages %}
						<div class="alert {{message.tags}}" role="alert">
							<strong>{{message}}</strong>
						</div>
						{% endfor %}
							
					{% endif %}
						
					<h1 class="h3 mb-3"><strong>Analytics</strong> Dashboard</h1>

					<div class="row">
						<div class="col-xl-6 col-xxl-5 d-flex">
							<div class="w-100">
								<div class="row">
									<div class="col-sm-6">
										<div class="card">
											<div class="card-body">
												<div class="row">
													<div class="col mt-0">
														<h5 class="card-title">Urls</h5>
													</div>

													<div class="col-auto">
														<div class="stat text-primary">
															<i class="fa-solid fa-link align-middle"></i>
														</div>
													</div>
												</div>
												<h1 class="mt-1 mb-3">{{url_obj}}</h1>
												<div class="mb-0">
													<span class="text-muted">As per your current plan You total have </span>
													<span class="text-success"> <i class="mdi mdi-arrow-bottom-right"></i> {{request.user.subscription.plan.number_url}} </span>
												</div>
											</div>
										</div>
										<div class="card">
											<div class="card-body">
												<div class="row">
													<div class="col mt-0">
														<h5 class="card-title">QR Codes</h5>
													</div>

													<div class="col-auto">
														<div class="stat text-primary">
															<i class="align-middle fa-solid fa-qrcode"></i>
														</div>
													</div>
												</div>
												<h1 class="mt-1 mb-3">{{qr_obj}}</h1>
												<div class="mb-0">
													<span class="text-muted">As per your current plan You total have </span>
													<span class="text-success"> <i class="mdi mdi-arrow-bottom-right"></i> {{request.user.subscription.plan.number_qr}} </span>
												</div>
											</div>
										</div>
									</div>
									<div class="col-sm-6">
										<div class="card">
											<div class="card-body">
												<div class="row">
													<div class="col mt-0">
														<h5 class="card-title">Bulk Urls</h5>
													</div>

													<div class="col-auto">
														<div class="stat text-primary">
															<i class="align-middle fa-solid fa-list"></i>
														</div>
													</div>
												</div>
												<h1 class="mt-1 mb-3">{{bulk_url_obj}}</h1>
												<div class="mb-0">
													<span class="text-muted">As per your current plan You have Bulk Url Short : </span>
													<span class="text-success"> <i class="mdi mdi-arrow-bottom-right"></i> {{request.user.subscription.plan.bulk_url_short}} </span>
												</div>
											</div>
										</div>
										<div class="card">
											<div class="card-body">
												<div class="row">
													<div class="col mt-0">
														<h5 class="card-title">Total Clicks</h5>
													</div>

													<div class="col-auto">
														<div class="stat text-primary">
															<i class="align-middle fa-solid fa-arrow-pointer"></i>
														</div>
													</div>
												</div>
												<h1 class="mt-1 mb-3">{{total_hit_count}}</h1>
												<div class="mb-0">
													<span class="text-success"> <i class="mdi mdi-arrow-bottom-right"></i> +0.00% </span>
													<span class="text-muted">Since last week</span>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<div class="col-xl-6 col-xxl-7">
							<div class="card flex-fill w-100">
								<div class="card-header">

									<h5 class="card-title mb-0">Recent Movement <span class="text-danger">(Coming Soon)</span></h5>
								</div>
								<div class="card-body py-3">
									<div class="chart chart-sm">
										<canvas id="chartjs-dashboard-line"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="col-12 col-lg-8 col-xxl-9 d-flex">
							<div class="card flex-fill">
								<div class="card-header">
									
									<h5 class="card-title mb-0">Latest Transctions</h5>
								</div>
								
								<div class="table-responsive">
									<table class="table table-hover my-0">
										<thead>
											<tr>
												<th>Transction ID</th>
												<th>Date</th>
												<th>Plan</th>
												<th>Amount</th>
												<th>Status</th>
											</tr>
										</thead>
										<tbody>
											{% for transc in transctions %}
											<tr>
												<td>{{transc.payment_id}}</td>
												<td>{{transc.timestamp}}</td>
												<td>{{transc.plan}}</td>
												<td>{{transc.amount}}</td>
												<td>
													
													{% if transc.payment_status == "success" %}
													<span class="badge bg-success">Done</span>
													{% else %}
													<span class="badge bg-danger">Failed</span>
													{% endif %}
														
												</td>
											</tr>
											{% endfor %}
											
										</tbody>
									</table>
								</div>
							</div>
						</div>
						<div class="col-12 col-lg-4 col-xxl-3 d-flex">
							<div class="card flex-fill w-100">
								<div class="card-header">

									<h5 class="card-title mb-0">Monthly <span class="text-danger">(Coming Soon)</span></h5>
								</div>
								<div class="card-body d-flex w-100">
									<div class="align-self-center chart chart-lg">
										<canvas id="chartjs-dashboard-bar"></canvas>
									</div>
								</div>
							</div>
						</div>
					</div>

				</div>
			</main>
{% endblock content %}